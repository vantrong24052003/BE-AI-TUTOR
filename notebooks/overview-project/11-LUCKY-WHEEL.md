# NRO Marketplace - Lucky Wheel (VÃ²ng Quay Random Account)

> Äáº·c táº£ tÃ­nh nÄƒng vÃ²ng quay may máº¯n - random game account

---

## ğŸ° 1. Feature Overview

### Concept

**Lucky Wheel** lÃ  tÃ­nh nÄƒng quay sá»‘ ngáº«u nhiÃªn Ä‘á»ƒ nháº­n tÃ i khoáº£n game. User tráº£ má»™t khoáº£n phÃ­ cá»‘ Ä‘á»‹nh Ä‘á»ƒ quay, nháº­n Ä‘Æ°á»£c má»™t account random tá»« pool.

### Supported Games

| Game | Code | Min Value | Max Value |
|------|------|-----------|-----------|
| Ngá»c Rá»“ng Online | `ngoc_rong` | 50,000Ä‘ | 5,000,000Ä‘ |
| LiÃªn QuÃ¢n Mobile | `lien_quan` | 50,000Ä‘ | 3,000,000Ä‘ |
| Free Fire | `free_fire` | 50,000Ä‘ | 2,000,000Ä‘ |
| PUBG Mobile | `pubg` | 50,000Ä‘ | 2,000,000Ä‘ |

### Business Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LUCKY WHEEL BUSINESS MODEL                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  TRADITIONAL BUY                    LUCKY WHEEL
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  User pays 500k                     User pays 100k
  User gets EXACT account            User gets RANDOM account
  Price = Listed price               Value could be 50k - 5M

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  EXAMPLE:                                                           â”‚
  â”‚                                                                     â”‚
  â”‚  Spin Cost: 100,000Ä‘                                                â”‚
  â”‚                                                                     â”‚
  â”‚  Possible Rewards:                                                  â”‚
  â”‚  â”œâ”€ 50% chance â†’ 50,000Ä‘ account  (Platform earns 50k)             â”‚
  â”‚  â”œâ”€ 30% chance â†’ 100,000Ä‘ account (Break even)                     â”‚
  â”‚  â”œâ”€ 15% chance â†’ 200,000Ä‘ account (Platform loses 100k)            â”‚
  â”‚  â””â”€ 5% chance  â†’ 1,000,000Ä‘ account (Jackpot!)                     â”‚
  â”‚                                                                     â”‚
  â”‚  Expected Value: ~90,000Ä‘ (Platform profit: 10%)                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ® 2. Wheel Types

### Type 1: Bronze Wheel (VÃ²ng Äá»“ng)

| Property | Value |
|----------|-------|
| Cost per spin | 50,000Ä‘ |
| Min account value | 30,000Ä‘ |
| Max account value | 200,000Ä‘ |
| Games | NRO, LQ, FF |

### Type 2: Silver Wheel (VÃ²ng Báº¡c)

| Property | Value |
|----------|-------|
| Cost per spin | 100,000Ä‘ |
| Min account value | 50,000Ä‘ |
| Max account value | 500,000Ä‘ |
| Games | NRO, LQ, FF, PUBG |

### Type 3: Gold Wheel (VÃ²ng VÃ ng)

| Property | Value |
|----------|-------|
| Cost per spin | 300,000Ä‘ |
| Min account value | 100,000Ä‘ |
| Max account value | 2,000,000Ä‘ |
| Games | NRO, LQ, FF, PUBG |

### Type 4: Diamond Wheel (VÃ²ng Kim CÆ°Æ¡ng)

| Property | Value |
|----------|-------|
| Cost per spin | 500,000Ä‘ |
| Min account value | 200,000Ä‘ |
| Max account value | 5,000,000Ä‘ |
| Games | NRO Premium |

---

## ğŸ“Š 3. Probability System

### Tier Distribution

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROBABILITY DISTRIBUTION                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    BRONZE WHEEL (50k/spin)
                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

     50%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  Common (30-50k)
     30%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                  Uncommon (50-80k)
     15%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                              Rare (80-150k)
      4%  â–ˆâ–ˆâ–ˆ                                       Epic (150-180k)
      1%  â–ˆ                                         Legendary (180-200k)


                    GOLD WHEEL (300k/spin)
                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

     40%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         Common (100-150k)
     30%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                  Uncommon (150-250k)
     20%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                          Rare (250-500k)
      8%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                    Epic (500k-1M)
      2%  â–ˆâ–ˆ                                        Legendary (1M-2M)
```

### Tier Definitions

| Tier | Name | Color | Probability Range |
|------|------|-------|-------------------|
| 1 | Common | Gray | 40-50% |
| 2 | Uncommon | Green | 25-30% |
| 3 | Rare | Blue | 15-20% |
| 4 | Epic | Purple | 5-8% |
| 5 | Legendary | Gold | 1-2% |

---

## ğŸ”„ 4. Lucky Wheel Flow

### User Spin Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SPIN FLOW                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  USER                          SYSTEM                      DATABASE
     â”‚                            â”‚                           â”‚
     â”‚ 1. Select wheel type       â”‚                           â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                           â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚ 2. Check balance          â”‚
     â”‚                            â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                            â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚ 3. Check pool has accountsâ”‚
     â”‚                            â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                            â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                            â”‚                           â”‚
     â”‚ 4. Confirm spin            â”‚                           â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                           â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚ 5. Deduct balance         â”‚
     â”‚                            â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚ 6. Random select account  â”‚
     â”‚                            â”‚    (weighted by tier)     â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚ 7. Transfer account       â”‚
     â”‚                            â”‚    to user                â”‚
     â”‚                            â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚ 8. Create spin record     â”‚
     â”‚                            â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                            â”‚                           â”‚
     â”‚ 9. Show result + animation â”‚                           â”‚
     â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
     â”‚                            â”‚                           â”‚
     â”‚ 10. Reveal credentials     â”‚                           â”‚
     â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
     â”‚                            â”‚                           â”‚
```

### Account Pool Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ACCOUNT POOL FLOW                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ADMIN                         SYSTEM                      DATABASE
     â”‚                            â”‚                           â”‚
     â”‚ 1. Add accounts to pool    â”‚                           â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                           â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚ 2. Validate accounts      â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚ 3. Assign tier based on   â”‚
     â”‚                            â”‚    estimated value        â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚ 4. Store in pool          â”‚
     â”‚                            â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚ 5. Monitor pool health    â”‚
     â”‚                            â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                            â”‚                           â”‚
     â”‚ 6. Alert if pool low       â”‚                           â”‚
     â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
     â”‚                            â”‚                           â”‚
     â”‚ 7. Restock pool            â”‚                           â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                           â”‚
     â”‚                            â”‚                           â”‚
```

---

## ğŸ—„ï¸ 5. Database Design

### New Tables

```sql
-- Wheel types configuration
CREATE TABLE wheel_types (
  id BIGSERIAL PRIMARY KEY,
  name VARCHAR(50) NOT NULL,              -- 'bronze', 'silver', 'gold', 'diamond'
  display_name VARCHAR(100) NOT NULL,     -- 'VÃ²ng Äá»“ng', 'VÃ²ng Báº¡c'...
  cost DECIMAL(15,2) NOT NULL,            -- Cost per spin
  min_value DECIMAL(15,2) NOT NULL,       -- Min account value
  max_value DECIMAL(15,2) NOT NULL,       -- Max account value
  games TEXT[] NOT NULL,                  -- Supported games
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMP NOT NULL DEFAULT NOW()
);

-- Tier configuration per wheel
CREATE TABLE wheel_tiers (
  id BIGSERIAL PRIMARY KEY,
  wheel_type_id BIGINT NOT NULL REFERENCES wheel_types(id),
  tier INT NOT NULL,                      -- 1-5
  name VARCHAR(50) NOT NULL,              -- 'common', 'uncommon'...
  color VARCHAR(20) NOT NULL,             -- 'gray', 'green', 'blue'...
  probability DECIMAL(5,2) NOT NULL,      -- 0.00 - 100.00
  min_value DECIMAL(15,2) NOT NULL,
  max_value DECIMAL(15,2) NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

-- Account pool for lucky wheel
CREATE TABLE lucky_wheel_accounts (
  id BIGSERIAL PRIMARY KEY,
  wheel_type_id BIGINT NOT NULL REFERENCES wheel_types(id),
  tier_id BIGINT NOT NULL REFERENCES wheel_tiers(id),
  game_profile_id BIGINT NOT NULL REFERENCES game_profiles(id),
  estimated_value DECIMAL(15,2) NOT NULL,
  status VARCHAR(20) NOT NULL DEFAULT 'available', -- 'available', 'won', 'removed'
  added_by BIGINT REFERENCES accounts(id),
  added_at TIMESTAMP NOT NULL DEFAULT NOW(),
  won_by BIGINT REFERENCES accounts(id),
  won_at TIMESTAMP
);

-- Spin history
CREATE TABLE lucky_wheel_spins (
  id BIGSERIAL PRIMARY KEY,
  account_id BIGINT NOT NULL REFERENCES accounts(id),
  wheel_type_id BIGINT NOT NULL REFERENCES wheel_types(id),
  lucky_wheel_account_id BIGINT REFERENCES lucky_wheel_accounts(id),
  spin_cost DECIMAL(15,2) NOT NULL,
  account_value DECIMAL(15,2),            -- Value of won account
  tier_id BIGINT REFERENCES wheel_tiers(id),
  result VARCHAR(20) NOT NULL,            -- 'win', 'no_account'
  created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

-- Pool statistics (cached)
CREATE TABLE wheel_pool_stats (
  id BIGSERIAL PRIMARY KEY,
  wheel_type_id BIGINT NOT NULL REFERENCES wheel_types(id),
  game_title VARCHAR(50) NOT NULL,
  available_count INT NOT NULL DEFAULT 0,
  total_value DECIMAL(15,2) NOT NULL DEFAULT 0,
  updated_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE INDEX idx_lucky_wheel_accounts_status ON lucky_wheel_accounts(status);
CREATE INDEX idx_lucky_wheel_accounts_wheel ON lucky_wheel_accounts(wheel_type_id, status);
CREATE INDEX idx_lucky_wheel_spins_account ON lucky_wheel_spins(account_id);
CREATE INDEX idx_lucky_wheel_spins_created ON lucky_wheel_spins(created_at DESC);
```

### Seed Data

```sql
-- Wheel Types
INSERT INTO wheel_types (name, display_name, cost, min_value, max_value, games) VALUES
('bronze', 'VÃ²ng Äá»“ng', 50000, 30000, 200000, ARRAY['ngoc_rong', 'lien_quan', 'free_fire']),
('silver', 'VÃ²ng Báº¡c', 100000, 50000, 500000, ARRAY['ngoc_rong', 'lien_quan', 'free_fire', 'pubg']),
('gold', 'VÃ²ng VÃ ng', 300000, 100000, 2000000, ARRAY['ngoc_rong', 'lien_quan', 'free_fire', 'pubg']),
('diamond', 'VÃ²ng Kim CÆ°Æ¡ng', 500000, 200000, 5000000, ARRAY['ngoc_rong']);

-- Tiers for Bronze Wheel
INSERT INTO wheel_tiers (wheel_type_id, tier, name, color, probability, min_value, max_value) VALUES
(1, 1, 'Common', 'gray', 50.00, 30000, 50000),
(1, 2, 'Uncommon', 'green', 30.00, 50000, 80000),
(1, 3, 'Rare', 'blue', 15.00, 80000, 150000),
(1, 4, 'Epic', 'purple', 4.00, 150000, 180000),
(1, 5, 'Legendary', 'gold', 1.00, 180000, 200000);

-- Tiers for Gold Wheel
INSERT INTO wheel_tiers (wheel_type_id, tier, name, color, probability, min_value, max_value) VALUES
(3, 1, 'Common', 'gray', 40.00, 100000, 150000),
(3, 2, 'Uncommon', 'green', 30.00, 150000, 250000),
(3, 3, 'Rare', 'blue', 20.00, 250000, 500000),
(3, 4, 'Epic', 'purple', 8.00, 500000, 1000000),
(3, 5, 'Legendary', 'gold', 2.00, 1000000, 2000000);
```

---

## ğŸ”Œ 6. API Design

### Get Available Wheels

```http
GET /api/v1/lucky-wheel/wheels
```

**Response:**
```json
{
  "wheels": [
    {
      "id": 1,
      "name": "bronze",
      "display_name": "VÃ²ng Äá»“ng",
      "cost": "50000.00",
      "min_value": "30000.00",
      "max_value": "200000.00",
      "games": ["ngoc_rong", "lien_quan", "free_fire"],
      "pool_counts": {
        "ngoc_rong": 50,
        "lien_quan": 30,
        "free_fire": 20
      },
      "tiers": [
        { "tier": 1, "name": "Common", "color": "gray", "probability": 50 },
        { "tier": 2, "name": "Uncommon", "color": "green", "probability": 30 },
        { "tier": 3, "name": "Rare", "color": "blue", "probability": 15 },
        { "tier": 4, "name": "Epic", "color": "purple", "probability": 4 },
        { "tier": 5, "name": "Legendary", "color": "gold", "probability": 1 }
      ]
    }
  ]
}
```

### Spin the Wheel

```http
POST /api/v1/lucky-wheel/spin
```

**Request:**
```json
{
  "wheel_type_id": 1,
  "game_title": "ngoc_rong"
}
```

**Response (Success):**
```json
{
  "id": 123,
  "wheel_type": {
    "id": 1,
    "name": "bronze",
    "display_name": "VÃ²ng Äá»“ng"
  },
  "spin_cost": "50000.00",
  "result": {
    "tier": {
      "tier": 3,
      "name": "Rare",
      "color": "blue"
    },
    "account_value": "120000.00",
    "game_profile": {
      "id": 456,
      "game_title": "ngoc_rong",
      "server": "saophale",
      "level": 70,
      "power_score": 30000000,
      "game_attributes": {
        "planet": "namec",
        "skins": ["ssj", "super_saiyan"]
      }
    },
    "credentials": {
      "username": "game_user",
      "password": "AdminSet123!"
    }
  },
  "profit_loss": "70000.00",
  "created_at": "2026-02-26T10:00:00Z"
}
```

**Response (Insufficient Balance):**
```json
{
  "error": "insufficient_balance",
  "message": "Sá»‘ dÆ° khÃ´ng Ä‘á»§. Cáº§n 50,000Ä‘ Ä‘á»ƒ quay.",
  "required": "50000.00",
  "current_balance": "30000.00"
}
```

**Response (Empty Pool):**
```json
{
  "error": "pool_empty",
  "message": "Hiá»‡n táº¡i khÃ´ng cÃ²n account nÃ o trong vÃ²ng quay nÃ y. Vui lÃ²ng thá»­ láº¡i sau."
}
```

### Get Spin History

```http
GET /api/v1/lucky-wheel/history?page=1&per_page=20
```

**Response:**
```json
{
  "spins": [
    {
      "id": 123,
      "wheel_type": {
        "name": "bronze",
        "display_name": "VÃ²ng Äá»“ng"
      },
      "spin_cost": "50000.00",
      "tier": {
        "name": "Rare",
        "color": "blue"
      },
      "account_value": "120000.00",
      "game_title": "ngoc_rong",
      "profit_loss": "70000.00",
      "created_at": "2026-02-26T10:00:00Z"
    }
  ],
  "stats": {
    "total_spins": 50,
    "total_spent": "2500000.00",
    "total_value_won": "2800000.00",
    "net_profit": "300000.00"
  },
  "meta": {
    "current_page": 1,
    "total_pages": 3,
    "total_count": 50
  }
}
```

### Admin: Add Accounts to Pool

```http
POST /api/v1/admin/lucky-wheel/pool
```

**Request:**
```json
{
  "wheel_type_id": 1,
  "game_profile_ids": [101, 102, 103, 104, 105]
}
```

**Response:**
```json
{
  "added_count": 5,
  "pool_stats": {
    "wheel_type": "bronze",
    "game_title": "ngoc_rong",
    "available_count": 55,
    "total_value": "5500000.00"
  }
}
```

### Admin: Get Pool Status

```http
GET /api/v1/admin/lucky-wheel/pool
```

**Response:**
```json
{
  "pools": [
    {
      "wheel_type": {
        "id": 1,
        "name": "bronze"
      },
      "by_game": [
        {
          "game_title": "ngoc_rong",
          "available": 50,
          "by_tier": [
            { "tier": 1, "count": 25 },
            { "tier": 2, "count": 15 },
            { "tier": 3, "count": 7 },
            { "tier": 4, "count": 2 },
            { "tier": 5, "count": 1 }
          ]
        }
      ],
      "alerts": [
        {
          "game_title": "free_fire",
          "available": 3,
          "message": "Pool sáº¯p háº¿t, cáº§n thÃªm account"
        }
      ]
    }
  ]
}
```

---

## ğŸ¨ 7. UI Design

### Lucky Wheel Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ° VÃ’NG QUAY MAY Máº®N                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚                      â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                             â”‚   â”‚
â”‚  â”‚                     â•±                 â•²                            â”‚   â”‚
â”‚  â”‚                   â•±    ğŸ® NRO 50K     â•²                           â”‚   â”‚
â”‚  â”‚                  â”‚                     â”‚                           â”‚   â”‚
â”‚  â”‚                  â”‚    [SPIN BUTTON]    â”‚                           â”‚   â”‚
â”‚  â”‚                  â”‚      50,000Ä‘        â”‚                           â”‚   â”‚
â”‚  â”‚                   â•²                   â•±                            â”‚   â”‚
â”‚  â”‚                     â•²                â•±                             â”‚   â”‚
â”‚  â”‚                      â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                             â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Balance: 500,000Ä‘                                                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  Äá»’NG    â”‚ â”‚  Báº C     â”‚ â”‚  VÃ€NG    â”‚ â”‚ KIM CÆ¯Æ NGâ”‚                      â”‚
â”‚  â”‚  50k     â”‚ â”‚  100k    â”‚ â”‚  300k    â”‚ â”‚  500k    â”‚                      â”‚
â”‚  â”‚  [â—]     â”‚ â”‚  [ ]     â”‚ â”‚  [ ]     â”‚ â”‚  [ ]     â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CHá»ŒN GAME                                                           â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ [ğŸ® Ngá»c Rá»“ng] [ğŸ® LiÃªn QuÃ¢n] [ğŸ® Free Fire] [ğŸ® PUBG]             â”‚   â”‚
â”‚  â”‚   Pool: 50        Pool: 30       Pool: 20       Pool: 15           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ XÃC SUáº¤T TRÃšNG                                                     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  â¬œ Common (50%)      : 30k - 50k                                   â”‚   â”‚
â”‚  â”‚  ğŸŸ¢ Uncommon (30%)    : 50k - 80k                                   â”‚   â”‚
â”‚  â”‚  ğŸ”µ Rare (15%)        : 80k - 150k                                  â”‚   â”‚
â”‚  â”‚  ğŸŸ£ Epic (4%)         : 150k - 180k                                 â”‚   â”‚
â”‚  â”‚  ğŸŸ¡ Legendary (1%)    : 180k - 200k                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Spin Result Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚           ğŸ‰ CHÃšC Má»ªNG! ğŸ‰                          [âœ•]        â”‚
â”‚                                                                 â”‚
â”‚           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                  â”‚
â”‚           â”‚                                 â”‚                  â”‚
â”‚           â”‚         ğŸ”µ RARE!                â”‚                  â”‚
â”‚           â”‚                                 â”‚                  â”‚
â”‚           â”‚    Account Value: 120,000Ä‘      â”‚                  â”‚
â”‚           â”‚                                 â”‚                  â”‚
â”‚           â”‚    Báº¡n Ä‘Ã£ LÃƒI: +70,000Ä‘         â”‚                  â”‚
â”‚           â”‚                                 â”‚                  â”‚
â”‚           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ THÃ”NG TIN ACCOUNT                                        â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ Game: Ngá»c Rá»“ng Online                                  â”‚   â”‚
â”‚  â”‚ Server: Sao Pha LÃª                                      â”‚   â”‚
â”‚  â”‚ Level: 70                                               â”‚   â”‚
â”‚  â”‚ Power: 30,000,000                                       â”‚   â”‚
â”‚  â”‚ Skins: SSJ, Super Saiyan                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CREDENTIALS                                              â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ Username: game_user                      [ğŸ“‹ Copy]      â”‚   â”‚
â”‚  â”‚ Password: AdminSet123!                   [ğŸ“‹ Copy]      â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ âš ï¸ HÃ£y Ä‘á»•i máº­t kháº©u ngay sau khi Ä‘Äƒng nháº­p!            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  [Quay láº¡i]                           [Quay tiáº¿p (50,000Ä‘)]    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin Pool Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ° QUáº¢N LÃ POOL VÃ’NG QUAY                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  Äá»’NG    â”‚ â”‚  Báº C     â”‚ â”‚  VÃ€NG    â”‚ â”‚ KIM CÆ¯Æ NGâ”‚                      â”‚
â”‚  â”‚  Total   â”‚ â”‚  Total   â”‚ â”‚  Total   â”‚ â”‚  Total   â”‚                      â”‚
â”‚  â”‚   100    â”‚ â”‚    80    â”‚ â”‚    50    â”‚ â”‚    20    â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ VÃ’NG Äá»’NG - POOL STATUS                                             â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚ â”‚ Game          â”‚ Common â”‚ Uncommon â”‚ Rare â”‚ Epic â”‚ Legendary  â”‚  â”‚   â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Ngá»c Rá»“ng     â”‚   25   â”‚    15    â”‚   7  â”‚   2  â”‚     1      â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ LiÃªn QuÃ¢n     â”‚   20   â”‚    10    â”‚   5  â”‚   1  â”‚     0      â”‚  â”‚   â”‚
â”‚  â”‚ â”‚ Free Fire     â”‚   10   â”‚     3    â”‚   1  â”‚   0  â”‚     0      â”‚  â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ âš ï¸ Alerts:                                                          â”‚   â”‚
â”‚  â”‚ â€¢ Free Fire pool sáº¯p háº¿t (14 accounts)                             â”‚   â”‚
â”‚  â”‚ â€¢ Legendary tier chá»‰ cÃ²n 1 account                                 â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ THÃŠM ACCOUNT VÃ€O POOL                                               â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ Select accounts from pending:                                       â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ [âœ“] #101 - NRO - SPL - 50k (Common)                           â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [âœ“] #102 - NRO - SPL - 80k (Uncommon)                         â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [ ] #103 - NRO - VT - 120k (Rare)                              â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [ ] #104 - LQ - Asia - 200k (Epic)                             â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ [ThÃªm vÃ o Pool]                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ 8. Business Rules

### Pool Management Rules

| Rule | Description |
|------|-------------|
| Min Pool Size | 10 accounts per game per wheel |
| Tier Balance | Maintain ratio: 50/30/15/4/1 |
| Auto Alert | Notify admin when pool < 20% |
| Value Estimation | Admin sets estimated value when adding |

### Spin Rules

| Rule | Description |
|------|-------------|
| Balance Check | Must have sufficient balance before spin |
| One at a Time | Cannot spin multiple simultaneously |
| No Refund | Once spun, cannot cancel or refund |
| Instant Delivery | Credentials shown immediately after spin |

### Probability Calculation

```ruby
# Weighted random selection
def select_random_account(wheel_type_id, game_title)
  # Get all available accounts
  accounts = LuckyWheelAccount
    .where(wheel_type_id: wheel_type_id)
    .where(game_profile: { game_title: game_title })
    .where(status: 'available')
    .includes(:tier)

  # Group by tier
  by_tier = accounts.group_by(&:tier_id)

  # Roll for tier (weighted by probability)
  tier = roll_for_tier(wheel_type_id)

  # Random account from tier
  by_tier[tier.id].sample
end

def roll_for_tier(wheel_type_id)
  tiers = WheelTier.where(wheel_type_id: wheel_type_id).order(:tier)

  roll = rand * 100  # 0-100
  cumulative = 0

  tiers.each do |tier|
    cumulative += tier.probability
    return tier if roll <= cumulative
  end

  tiers.last  # Fallback
end
```

---

## ğŸ“Š 9. Analytics & Reporting

### User Stats

```json
{
  "user_id": 123,
  "total_spins": 50,
  "total_spent": "2500000.00",
  "total_value_won": "2800000.00",
  "net_profit": "300000.00",
  "by_tier": {
    "common": 25,
    "uncommon": 15,
    "rare": 8,
    "epic": 2,
    "legendary": 0
  },
  "biggest_win": {
    "value": "500000.00",
    "tier": "epic",
    "date": "2026-02-20"
  }
}
```

### Admin Stats

```json
{
  "period": "2026-02",
  "total_spins": 5000,
  "total_revenue": "250000000.00",
  "total_value_distributed": "220000000.00",
  "platform_profit": "30000000.00",
  "profit_margin": 12.0,
  "by_wheel": {
    "bronze": { "spins": 3000, "profit": "15000000.00" },
    "silver": { "spins": 1200, "profit": "8000000.00" },
    "gold": { "spins": 700, "profit": "5000000.00" },
    "diamond": { "spins": 100, "profit": "2000000.00" }
  }
}
```

---

## âœ… Implementation Checklist

### Phase 1: Backend
- [ ] Create database tables
- [ ] Create models with associations
- [ ] Implement wheel configuration
- [ ] Implement pool management
- [ ] Implement spin logic with weighted random
- [ ] Create API endpoints
- [ ] Add admin endpoints

### Phase 2: Frontend
- [ ] Lucky wheel page
- [ ] Wheel selection UI
- [ ] Spin animation
- [ ] Result modal
- [ ] History page
- [ ] Admin pool management

### Phase 3: Testing
- [ ] Unit tests for probability
- [ ] Integration tests for spin flow
- [ ] Load tests for concurrent spins

---

*Lucky Wheel feature - Gamification for marketplace engagement.*
